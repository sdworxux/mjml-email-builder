import React from 'react';
import {
  Square,
  Columns,
  Type,
  MousePointer2,
  Image as ImageIcon,
  Minus,
  Space,
  Share2,
  Box,
  Globe,
  Code,
  FileText,
  Tag,
  AlignLeft,
  Layers,
  Film,
  Link,
  Menu,
  List,
  Table,
  ChevronDown,
  Star,
  Eye,
  Palette,
  BookOpen,
  Sliders,
  LayoutTemplate,
} from 'lucide-react';
import { MJComponentType } from './types';

export type ComponentGroup = 'head' | 'layout' | 'content' | 'interactive' | 'navigation' | 'social';

export interface ComponentDef {
  type: MJComponentType;
  label: string;
  icon: React.ReactNode;
  defaultAttrs: Record<string, string>;
  isContainer: boolean;
  group: ComponentGroup;
  /** Default children to seed when dropped (optional) */
  defaultContent?: string;
}

export const MJML_COMPONENTS: ComponentDef[] = [

  // ── HEAD ──────────────────────────────────────────────────────────────────
  {
    type: 'mj-attributes',
    label: 'Attributes',
    icon: <Sliders size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: {},
    defaultContent: '',
  },
  {
    type: 'mj-breakpoint',
    label: 'Breakpoint',
    icon: <Sliders size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: { width: '480px' },
  },
  {
    type: 'mj-font',
    label: 'Font',
    icon: <Type size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: {
      name: 'Inter',
      href: 'https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap',
    },
  },
  {
    type: 'mj-html-attributes',
    label: 'HTML Attributes',
    icon: <Tag size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: {},
  },
  {
    type: 'mj-preview',
    label: 'Preview',
    icon: <Eye size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: {},
    defaultContent: 'Preview text shown in inbox…',
  },
  {
    type: 'mj-style',
    label: 'Style',
    icon: <Palette size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: { inline: 'inline' },
    defaultContent: '.custom { }',
  },
  {
    type: 'mj-title',
    label: 'Title',
    icon: <FileText size={16} />,
    group: 'head',
    isContainer: false,
    defaultAttrs: {},
    defaultContent: 'Email Subject',
  },

  // ── LAYOUT ────────────────────────────────────────────────────────────────
  {
    type: 'mj-body',
    label: 'Body',
    icon: <Box size={16} />,
    group: 'layout',
    isContainer: false,
    defaultAttrs: {
      'background-color': '',
      width: '600px',
      'css-class': '',
    },
  },
  {
    type: 'mj-wrapper',
    label: 'Wrapper',
    icon: <Box size={16} />,
    group: 'layout',
    isContainer: true,
    defaultAttrs: {
      'background-color': '',
      'background-url': '',
      'background-size': 'auto',
      'background-repeat': 'repeat',
      'background-position': 'top center',
      border: '',
      'border-radius': '',
      padding: '20px 0',
      'text-align': 'center',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-section',
    label: 'Section',
    icon: <Square size={16} />,
    group: 'layout',
    isContainer: true,
    defaultAttrs: {
      'background-color': '',
      'background-url': '',
      'background-size': 'auto',
      'background-repeat': 'repeat',
      'background-position': 'top center',
      border: '',
      'border-radius': '',
      padding: '20px 0',
      'text-align': 'center',
      direction: 'ltr',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-column',
    label: 'Column',
    icon: <Columns size={16} />,
    group: 'layout',
    isContainer: true,
    defaultAttrs: {
      width: '',
      'background-color': '',
      'inner-background': '',
      border: '',
      'border-radius': '',
      'vertical-align': 'top',
      padding: '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-group',
    label: 'Group',
    icon: <LayoutTemplate size={16} />,
    group: 'layout',
    isContainer: true,
    defaultAttrs: {
      width: '',
      direction: 'ltr',
      'background-color': '',
      'vertical-align': 'top',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-hero',
    label: 'Hero',
    icon: <Star size={16} />,
    group: 'layout',
    isContainer: true,
    defaultAttrs: {
      mode: 'fixed-height',
      height: '469px',
      'background-color': '#ffffff',
      'background-url': '',
      'background-position': 'center center',
      'background-size': 'cover',
      'vertical-align': 'top',
      padding: '100px 0px',
      'css-class': '',
      'mj-class': '',
    },
  },

  // ── CONTENT ───────────────────────────────────────────────────────────────
  {
    type: 'mj-text',
    label: 'Text',
    icon: <Type size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      color: '#262628',
      'font-family': 'Inter, sans-serif',
      'font-size': '14px',
      'font-weight': '',
      'font-style': '',
      'line-height': '1.6',
      'letter-spacing': '',
      'text-decoration': '',
      'text-transform': '',
      align: 'left',
      'container-background-color': '',
      padding: '10px 25px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Edit this text…',
  },
  {
    type: 'mj-button',
    label: 'Button',
    icon: <MousePointer2 size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      'background-color': '#006dd8',
      color: '#ffffff',
      'border-radius': '4px',
      border: '',
      align: 'center',
      'inner-padding': '10px 25px',
      padding: '10px 25px',
      'font-family': 'Inter, sans-serif',
      'font-size': '13px',
      'font-weight': '',
      'font-style': '',
      'text-decoration': 'none',
      'text-transform': '',
      href: '#',
      target: '_blank',
      rel: '',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Click here',
  },
  {
    type: 'mj-image',
    label: 'Image',
    icon: <ImageIcon size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      src: 'https://picsum.photos/600/300',
      width: '600px',
      height: '',
      align: 'center',
      alt: '',
      href: '',
      target: '_blank',
      rel: '',
      border: '',
      'border-radius': '',
      padding: '0',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-divider',
    label: 'Divider',
    icon: <Minus size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      'border-color': '#e0e0e0',
      'border-style': 'solid',
      'border-width': '1px',
      width: '100%',
      align: 'center',
      padding: '10px 25px',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-spacer',
    label: 'Spacer',
    icon: <Space size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      height: '20px',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-table',
    label: 'Table',
    icon: <Table size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {
      color: '#262628',
      'font-family': 'Inter, sans-serif',
      'font-size': '13px',
      'line-height': '22px',
      align: 'left',
      'cell-padding': '0px',
      'container-background-color': '',
      padding: '10px 25px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: '<tr><th>Header</th><th>Header</th></tr><tr><td>Cell</td><td>Cell</td></tr>',
  },
  {
    type: 'mj-raw',
    label: 'Raw HTML',
    icon: <Code size={16} />,
    group: 'content',
    isContainer: false,
    defaultAttrs: {},
    defaultContent: '<!-- raw HTML here -->',
  },

  // ── INTERACTIVE ───────────────────────────────────────────────────────────
  {
    type: 'mj-accordion',
    label: 'Accordion',
    icon: <ChevronDown size={16} />,
    group: 'interactive',
    isContainer: true,
    defaultAttrs: {
      border: 'none',
      padding: '1px',
      'font-family': 'Inter, sans-serif',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-accordion-element',
    label: 'Accordion Item',
    icon: <AlignLeft size={16} />,
    group: 'interactive',
    isContainer: true,
    defaultAttrs: {
      'background-color': '',
      border: '',
      'font-family': 'Inter, sans-serif',
      'icon-align': 'middle',
      'icon-wrapped-url': 'https://i.imgur.com/w4uTygT.png',
      'icon-unwrapped-url': 'https://i.imgur.com/bIXv1bk.png',
      'icon-height': '24px',
      'icon-width': '24px',
      'icon-position': 'right',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-accordion-title',
    label: 'Accordion Title',
    icon: <BookOpen size={16} />,
    group: 'interactive',
    isContainer: false,
    defaultAttrs: {
      color: '#031017',
      'background-color': '#ffffff',
      'font-family': 'Inter, sans-serif',
      'font-size': '16px',
      'font-weight': '',
      align: 'left',
      padding: '15px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Accordion Title',
  },
  {
    type: 'mj-accordion-text',
    label: 'Accordion Text',
    icon: <AlignLeft size={16} />,
    group: 'interactive',
    isContainer: false,
    defaultAttrs: {
      color: '#505050',
      'background-color': '#fafafa',
      'font-family': 'Inter, sans-serif',
      'font-size': '14px',
      'font-weight': '',
      'line-height': '1.5',
      align: 'left',
      padding: '15px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Accordion body content goes here.',
  },
  {
    type: 'mj-carousel',
    label: 'Carousel',
    icon: <Film size={16} />,
    group: 'interactive',
    isContainer: true,
    defaultAttrs: {
      align: 'center',
      'background-color': '',
      'border-radius': '6px',
      'thumbnail-border': '2px solid transparent',
      'thumbnail-border-radius': '6px',
      'thumbnail-width': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-carousel-image',
    label: 'Carousel Image',
    icon: <ImageIcon size={16} />,
    group: 'interactive',
    isContainer: false,
    defaultAttrs: {
      src: 'https://picsum.photos/600/300',
      alt: '',
      href: '#',
      rel: '',
      target: '_blank',
      title: '',
      'css-class': '',
      'mj-class': '',
    },
  },

  // ── NAVIGATION ────────────────────────────────────────────────────────────
  {
    type: 'mj-navbar',
    label: 'Navbar',
    icon: <Menu size={16} />,
    group: 'navigation',
    isContainer: true,
    defaultAttrs: {
      align: 'center',
      'base-url': 'https://example.com',
      hamburger: 'hamburger',
      'ico-open': '&#9776;',
      'ico-close': '&#8855;',
      'ico-color': '#000000',
      'ico-font-size': '30px',
      'ico-font-family': 'Ubuntu, Helvetica, Arial, sans-serif',
      'ico-text-transform': 'uppercase',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-navbar-link',
    label: 'Navbar Link',
    icon: <Link size={16} />,
    group: 'navigation',
    isContainer: false,
    defaultAttrs: {
      href: '#',
      target: '_blank',
      rel: '',
      color: '#262628',
      'font-family': 'Inter, sans-serif',
      'font-size': '13px',
      'font-weight': '',
      'font-style': '',
      'text-decoration': 'none',
      'text-transform': '',
      'letter-spacing': '',
      padding: '15px 10px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Nav Link',
  },

  // ── SOCIAL ────────────────────────────────────────────────────────────────
  {
    type: 'mj-social',
    label: 'Social',
    icon: <Share2 size={16} />,
    group: 'social',
    isContainer: true,
    defaultAttrs: {
      align: 'center',
      color: '',
      'border-radius': '',
      'font-family': 'Inter, sans-serif',
      'font-size': '13px',
      'font-style': '',
      'font-weight': '',
      'icon-size': '20px',
      'icon-padding': '0px',
      'inner-padding': '4px 8px',
      'line-height': '22px',
      mode: 'horizontal',
      padding: '10px 25px',
      'text-decoration': 'none',
      'text-padding': '4px 4px 4px 0',
      'container-background-color': '',
      'css-class': '',
      'mj-class': '',
    },
  },
  {
    type: 'mj-social-element',
    label: 'Social Link',
    icon: <Globe size={16} />,
    group: 'social',
    isContainer: false,
    defaultAttrs: {
      name: 'facebook',
      href: 'https://www.facebook.com/',
      target: '_blank',
      rel: '',
      'background-color': '#3b5998',
      color: '#ffffff',
      'border-radius': '3px',
      'font-family': 'Inter, sans-serif',
      'font-size': '13px',
      'font-style': '',
      'font-weight': '',
      'icon-size': '20px',
      'icon-height': '',
      'line-height': '22px',
      'text-decoration': 'none',
      'text-padding': '4px 4px 4px 0',
      padding: '0px',
      'css-class': '',
      'mj-class': '',
    },
    defaultContent: 'Facebook',
  },
];

// Groups for the sidebar
export const COMPONENT_GROUPS: { key: ComponentGroup; label: string }[] = [
  { key: 'head', label: 'Head' },
  { key: 'layout', label: 'Layout' },
  { key: 'content', label: 'Content' },
  { key: 'interactive', label: 'Interactive' },
  { key: 'navigation', label: 'Navigation' },
  { key: 'social', label: 'Social' },
];
